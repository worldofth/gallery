{"version":3,"sources":["main.min.js","../src/util/util.js","../src/ui/gallery-grid.js","../src/index.js","../vendor/knot.js","../vendor/brick.js"],"names":["onEndTransition","el","Promise","resolve","reject","onEndCallbackFn","ev","i","transitionEndName","length","removeEventListener","addEventListener","extend","objects","arguments","combinedObject","key","requestAnimationFramePromise","requestAnimationFrame","createGalleryGrid","options","galGridObj","Object","create","GalleryGrid","setup","init","elClass","this","document","querySelector","defaultOptions","sizeIndex","getSizeIndex","call","items","Array","prototype","slice","querySelectorAll","previewEl","nextElementSibling","isExpanded","isAnimating","ticking","closeBtn","previewDescriptions","previewDescriptionEl","emptyPreviewDescriptionEl","previousBtn","nextBtn","openItem","bind","closeItem","nextItem","previousItem","initAfterImagesLoad","bricks","Bricks","container","packed","sizes","resize","pack","classList","add","addEventListeners","setOriginal","setClone","all","gridImagesLoaded","then","self","forEach","item","evt","preventDefault","window","resizeFrame","newSizeIndex","imgPositions","map","size","mq","matchMedia","matches","indexOf","resizeHandler","originalImg","style","opacity","updateSlideBtnStatus","itemImage","itemImageBCR","getBoundingClientRect","current","getAttribute","src","width","offsetWidth","height","offsetHeight","left","top","pageMargin","pagemargin","win","getWinSize","originalSizeArr","split","originalSize","dx","pos","x","Math","abs","dy","y","z","min","transform","cloneImg","WebkitTransform","descriptionEl","innerHTML","setTimeout","originalImageLoadPromise","reason","console","error","createElement","className","maxWidth","parseInt","maxHeight","oldEl","remove","appendChild","setAttribute","imageLoadPromise","img","imageLoad","complete","onload","settings","slideItem","getNextItem","getPreviousItem","changeDistance","getItemCb","_this","lastItem","contains","changeDistanceDx","cloneTransform","transition","emptyDescriptionTransform","originalImgTransform","descriptionTransform","tmpDescription","currentItem","previousElementSibling","documentElement","clientWidth","innerHeight","setupGalleryGrid","createGalleryGrid$1","columns","gutter","knot","on","name","handler","events","push","once","_once","off","undefined","splice","emit","_len","args","_key","cache","apply","object","out","ounce","runSeries","functions","func","toArray","selector","fillArray","setSizeIndex","setSizeDetail","sizeDetail","setColumns","columnHeights","setNodes","nodes","persist","selectors","setNodesDimensions","nodesWidth","nodesHeights","element","clientHeight","setNodesStyles","index","target","position","setContainerStyles","max","instance","concat","run","update","flag","action","reverse","new","readyState"],"mappings":"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","file":"main.min.js","sourcesContent":["(function () {\n'use strict';\n\nvar transitionEndName = ['webkitTransitionEnd', 'transitionend', 'msTransitionEnd', 'oTransitionEnd'];\n\nfunction onEndTransition(el) {\n\treturn new Promise(function (resolve, reject) {\n\t\tvar onEndCallbackFn = function onEndCallbackFn(ev) {\n\t\t\tfor (var i = 0; i < transitionEndName.length; i++) {\n\t\t\t\tel.removeEventListener(transitionEndName[i], onEndCallbackFn);\n\t\t\t}\n\t\t\tresolve();\n\t\t};\n\n\t\tif (!el) {\n\t\t\treject('No element passed to on End Transition');\n\t\t}\n\n\t\tfor (var i = 0; i < transitionEndName.length; i++) {\n\t\t\tel.addEventListener(transitionEndName[i], onEndCallbackFn);\n\t\t}\n\t});\n}\n\nfunction extend() {\n\tvar objects = arguments;\n\tif (objects.length < 2) {\n\t\treturn objects[0];\n\t}\n\tvar combinedObject = objects[0];\n\n\tfor (var i = 1; i < objects.length; i++) {\n\t\tif (!objects[i]) {\n\t\t\tcontinue;\n\t\t}\n\t\tfor (var key in objects[i]) {\n\t\t\tcombinedObject[key] = objects[i][key];\n\t\t}\n\t}\n\n\treturn combinedObject;\n}\n\nfunction requestAnimationFramePromise() {\n\treturn new Promise(function (resolve, reject) {\n\t\treturn requestAnimationFrame(resolve);\n\t});\n}\n\nvar knot = (function () {\n  var object = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var events = {};\n\n  function on(name, handler) {\n    events[name] = events[name] || [];\n    events[name].push(handler);\n    return this;\n  }\n\n  function once(name, handler) {\n    handler._once = true;\n    on(name, handler);\n    return this;\n  }\n\n  function off(name) {\n    var handler = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    handler ? events[name].splice(events[name].indexOf(handler), 1) : delete events[name];\n\n    return this;\n  }\n\n  function emit(name) {\n    var _this = this;\n\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    // cache the events, to avoid consequences of mutation\n    var cache = events[name] && events[name].slice();\n\n    // only fire handlers if they exist\n    cache && cache.forEach(function (handler) {\n      // remove handlers added with 'once'\n      handler._once && off(name, handler);\n\n      // set 'this' context, pass args to handlers\n      handler.apply(_this, args);\n    });\n\n    return this;\n  }\n\n  var out = object;\n  out.on = on;\n  out.ounce = once;\n  out.off = off;\n  out.emit = emit;\n\n  return out;\n});\n\nvar Bricks = (function () {\n\tvar options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t// globals\n\n\tvar persist = void 0; // updating or packing all elements?\n\tvar ticking = void 0; // for debounced resize\n\n\tvar sizeIndex = void 0;\n\tvar sizeDetail = void 0;\n\n\tvar columnHeights = void 0;\n\n\tvar nodes = void 0;\n\tvar nodesWidth = void 0;\n\tvar nodesHeights = void 0;\n\n\t// options\n\tvar container = document.querySelector(options.container);\n\tvar packed = options.packed.indexOf('data-') === 0 ? options.packed : 'data-' + options.packed;\n\tvar sizes = options.sizes.slice().reverse();\n\n\tvar selectors = {\n\t\tall: options.container + ' > *',\n\t\tnew: options.container + ' > *:not([' + packed + '])'\n\t};\n\n\t// series\n\n\tvar setup = [setSizeIndex, setSizeDetail, setColumns];\n\n\tvar run = [setNodes, setNodesDimensions, setNodesStyles, setContainerStyles];\n\n\t// instance\n\n\tvar instance = knot({\n\t\tpack: pack,\n\t\tupdate: update,\n\t\tresize: resize\n\t});\n\n\treturn instance;\n\n\t// general helpers\n\n\tfunction runSeries(functions) {\n\t\tfunctions.forEach(function (func) {\n\t\t\treturn func();\n\t\t});\n\t}\n\n\t// array helpers\n\n\tfunction toArray(selector) {\n\t\treturn Array.prototype.slice.call(document.querySelectorAll(selector));\n\t}\n\n\tfunction fillArray(length) {\n\t\treturn Array.apply(null, Array(length)).map(function () {\n\t\t\treturn 0;\n\t\t});\n\t}\n\n\t// size helpers\n\n\tfunction getSizeIndex() {\n\t\t// find index of widest matching media query\n\t\treturn sizes.map(function (size) {\n\t\t\treturn size.mq && window.matchMedia('(min-width: ' + size.mq + ')').matches;\n\t\t}).indexOf(true);\n\t}\n\n\tfunction setSizeIndex() {\n\t\tsizeIndex = getSizeIndex();\n\t}\n\n\tfunction setSizeDetail() {\n\t\t// if no media queries matched, use the base case\n\t\tsizeDetail = sizeIndex === -1 ? sizes[sizes.length - 1] : sizes[sizeIndex];\n\t}\n\n\t// column helpers\n\n\tfunction setColumns() {\n\t\tcolumnHeights = fillArray(sizeDetail.columns);\n\t}\n\n\t// node helpers\n\n\tfunction setNodes() {\n\t\tnodes = toArray(persist ? selectors.new : selectors.all);\n\t}\n\n\tfunction setNodesDimensions() {\n\t\tif (nodes.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tnodesWidth = nodes[0].clientWidth;\n\t\tnodesHeights = nodes.map(function (element) {\n\t\t\treturn element.clientHeight;\n\t\t});\n\t}\n\n\tfunction setNodesStyles() {\n\t\tnodes.forEach(function (element, index) {\n\t\t\tvar target = columnHeights.indexOf(Math.min.apply(Math, columnHeights));\n\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.top = columnHeights[target] + 'px';\n\t\t\telement.style.left = target * nodesWidth + target * sizeDetail.gutter + 'px';\n\n\t\t\telement.setAttribute(packed, '');\n\n\t\t\tcolumnHeights[target] += nodesHeights[index] + sizeDetail.gutter;\n\t\t});\n\t}\n\n\t// container helpers\n\n\tfunction setContainerStyles() {\n\t\tcontainer.style.position = 'relative';\n\t\tcontainer.style.width = sizeDetail.columns * nodesWidth + (sizeDetail.columns - 1) * sizeDetail.gutter + 'px';\n\t\tcontainer.style.height = Math.max.apply(Math, columnHeights) - sizeDetail.gutter + 'px';\n\t}\n\n\t// resize helpers\n\n\tfunction resizeFrame() {\n\t\tif (!ticking) {\n\t\t\trequestAnimationFrame(resizeHandler);\n\t\t\tticking = true;\n\t\t}\n\t}\n\n\tfunction resizeHandler() {\n\t\tif (sizeIndex !== getSizeIndex()) {\n\t\t\tpack();\n\t\t\tinstance.emit('resize', sizeDetail);\n\t\t}\n\n\t\tticking = false;\n\t}\n\n\t// API\n\n\tfunction pack() {\n\t\tpersist = false;\n\t\trunSeries(setup.concat(run));\n\n\t\treturn instance.emit('pack');\n\t}\n\n\tfunction update() {\n\t\tpersist = true;\n\t\trunSeries(run);\n\n\t\treturn instance.emit('update');\n\t}\n\n\tfunction resize() {\n\t\tvar flag = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n\t\tvar action = flag ? 'addEventListener' : 'removeEventListener';\n\n\t\twindow[action]('resize', resizeFrame);\n\n\t\treturn instance;\n\t}\n});\n\nvar GalleryGrid = {\n\tsetup: setup,\n\tinit: init$1,\n\n\topenItem: openItem,\n\tcloseItem: closeItem,\n\tnextItem: nextItem,\n\tpreviousItem: previousItem\n};\n\nvar defaultOptions = {\n\t// x and y can have values from 0 to 1 (percentage). If negative then it means the alignment is left and/or top rather than right and/or bottom\n\t// so, as an example, if we want our large image to be positioned vertically on 25% of the screen and centered horizontally the values would be x:1,y:-0.25\n\timgPositions: [{ pos: { x: 1, y: 1 }, pagemargin: 0 }],\n\tsizes: [{ columns: 1, gutter: 30 }, { mq: '1024px', columns: 5, gutter: 30 }]\n};\n\nfunction createGalleryGrid$1(el, options) {\n\tvar galGridObj = Object.create(GalleryGrid);\n\tgalGridObj.setup(el, options);\n\tgalGridObj.init();\n\treturn galGridObj;\n}\n\nfunction setup(elClass, options) {\n\tthis.elClass = elClass;\n\tthis.el = document.querySelector(elClass);\n\tif (!this.el) {\n\t\treturn;\n\t}\n\n\tthis.options = extend({}, defaultOptions, options);\n\tthis.sizeIndex = getSizeIndex.call(this);\n\tthis.items = Array.prototype.slice.call(this.el.querySelectorAll('.gallery__item'));\n\tthis.previewEl = this.el.nextElementSibling;\n\tthis.isExpanded = false;\n\tthis.isAnimating = false;\n\tthis.ticking = false;\n\tthis.closeBtn = this.previewEl.querySelector('.gallery__preview-close');\n\tvar previewDescriptions = this.previewEl.querySelectorAll('.gallery__preview-description');\n\tthis.previewDescriptionEl = previewDescriptions[0];\n\tthis.emptyPreviewDescriptionEl = previewDescriptions[1];\n\n\tthis.previousBtn = this.previewEl.querySelector('.gallery__preview-btn--previous');\n\tthis.nextBtn = this.previewEl.querySelector('.gallery__preview-btn--next');\n\n\tthis.openItem = this.openItem.bind(this);\n\tthis.closeItem = this.closeItem.bind(this);\n\tthis.nextItem = this.nextItem.bind(this);\n\tthis.previousItem = this.previousItem.bind(this);\n}\n\nfunction init$1() {\n\tif (!this.el) {\n\t\treturn;\n\t}\n\n\tvar initAfterImagesLoad = function initAfterImagesLoad() {\n\t\tthis.bricks = Bricks({\n\t\t\tcontainer: this.elClass,\n\t\t\tpacked: 'data-packed',\n\t\t\tsizes: this.options.sizes\n\t\t});\n\n\t\tthis.bricks.resize(true).pack();\n\n\t\tthis.el.classList.add('gallery--loaded');\n\n\t\taddEventListeners.call(this);\n\t\tsetOriginal.call(this);\n\t\tsetClone.call(this);\n\t};\n\n\tPromise.all(gridImagesLoaded.call(this)).then(initAfterImagesLoad.bind(this));\n}\n\nfunction addEventListeners() {\n\tvar self = this;\n\n\tthis.items.forEach(function (item) {\n\t\tif (!item.querySelector('.gallery__image')) {\n\t\t\treturn;\n\t\t}\n\t\titem.addEventListener('click', function (evt) {\n\t\t\tevt.preventDefault();\n\t\t\tself.openItem(item);\n\t\t});\n\t});\n\n\tthis.closeBtn.addEventListener('click', this.closeItem);\n\tthis.previousBtn.addEventListener('click', this.previousItem);\n\tthis.nextBtn.addEventListener('click', this.nextItem);\n\twindow.addEventListener('resize', resizeFrame.bind(this));\n\twindow.addEventListener('keydown', function (evt) {\n\t\tif (evt.key == \"Escape\") {\n\t\t\tthis.closeItem();\n\t\t}\n\t\tif (evt.key == \"ArrowRight\") {\n\t\t\tthis.nextItem();\n\t\t}\n\t\tif (evt.key == \"ArrowLeft\") {\n\t\t\tthis.previousItem();\n\t\t}\n\t}.bind(this));\n}\n\nfunction getSizeIndex() {\n\tvar newSizeIndex = this.options.imgPositions.map(function (size) {\n\t\treturn size.mq && window.matchMedia('(min-width: ' + size.mq + ')').matches;\n\t}).indexOf(true);\n\treturn ~newSizeIndex ? newSizeIndex : 0;\n}\n\nfunction resizeFrame() {\n\tif (!this.ticking) {\n\t\trequestAnimationFrame(resizeHandler.bind(this));\n\t\tthis.ticking = true;\n\t}\n}\n\nfunction resizeHandler() {\n\tvar newSizeIndex = getSizeIndex.call(this);\n\tif (this.sizeIndex !== newSizeIndex) {\n\t\tthis.sizeIndex = newSizeIndex;\n\t\tsetOriginal.call(this);\n\n\t\tif (this.isExpanded) {\n\t\t\tthis.originalImg.style.opacity = 1;\n\t\t}\n\t}\n\tthis.ticking = false;\n}\n\nfunction openItem(item) {\n\tif (this.isAnimating || this.isExpanded) {\n\t\treturn;\n\t}\n\tthis.isAnimating = true;\n\tthis.isExpanded = true;\n\n\tupdateSlideBtnStatus.call(this, item);\n\n\tvar itemImage = item.querySelector('img'),\n\t    itemImageBCR = itemImage.getBoundingClientRect();\n\n\tthis.current = this.items.indexOf(item);\n\n\tsetOriginal.call(this, item.querySelector('a').getAttribute('href'));\n\n\tsetClone.call(this, itemImage.src, {\n\t\twidth: itemImage.offsetWidth,\n\t\theight: itemImage.offsetHeight,\n\t\tleft: itemImageBCR.left,\n\t\ttop: itemImageBCR.top\n\t});\n\n\titem.classList.add('gallery__item--current');\n\n\tvar pageMargin = 0;\n\tif (typeof this.options.imgPositions[this.sizeIndex].pagemargin !== 'undefined') {\n\t\tpageMargin = this.options.imgPositions[this.sizeIndex].pagemargin;\n\t}\n\n\tvar win = getWinSize(),\n\t    originalSizeArr = item.getAttribute('data-size').split('x'),\n\t    originalSize = { width: originalSizeArr[0], height: originalSizeArr[1] },\n\t    dx = (this.options.imgPositions[this.sizeIndex].pos.x > 0 ? 1 - Math.abs(this.options.imgPositions[this.sizeIndex].pos.x) : Math.abs(this.options.imgPositions[this.sizeIndex].pos.x)) * win.width + this.options.imgPositions[this.sizeIndex].pos.x * win.width / 2 - itemImageBCR.left - 0.5 * itemImage.offsetWidth,\n\t    dy = (this.options.imgPositions[this.sizeIndex].pos.y > 0 ? 1 - Math.abs(this.options.imgPositions[this.sizeIndex].pos.y) : Math.abs(this.options.imgPositions[this.sizeIndex].pos.y)) * win.height + this.options.imgPositions[this.sizeIndex].pos.y * win.height / 2 - itemImageBCR.top - 0.5 * itemImage.offsetHeight,\n\t    z = Math.min(Math.min(win.width * Math.abs(this.options.imgPositions[this.sizeIndex].pos.x) - pageMargin, originalSize.width - pageMargin) / itemImage.offsetWidth, Math.min(win.height * Math.abs(this.options.imgPositions[this.sizeIndex].pos.y) - pageMargin, originalSize.height - pageMargin) / itemImage.offsetHeight);\n\n\tvar transform = 'translate3d(' + dx + 'px, ' + dy + 'px, 0) scale3d(' + z + ', ' + z + ', 1)';\n\tthis.cloneImg.style.WebkitTransform = transform;\n\tthis.cloneImg.style.transform = transform;\n\n\tvar descriptionEl = item.querySelector('.gallery__description');\n\tif (descriptionEl) {\n\t\tthis.previewDescriptionEl.innerHTML = descriptionEl.innerHTML;\n\t}\n\n\tvar self = this;\n\tsetTimeout(function () {\n\t\tself.previewEl.classList.add('gallery__preview--open');\n\t}, 0);\n\n\tPromise.all([onEndTransition(this.cloneImg), originalImageLoadPromise.call(this)]).then(function () {\n\t\tself.originalImg.style.opacity = 1;\n\t}).then(function () {\n\t\treturn onEndTransition(self.originalImg);\n\t}).then(function () {\n\t\tself.cloneImg.style.opacity = 0;\n\t\tself.cloneImg.style.WebkitTransform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\t\tself.cloneImg.style.transform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\n\t\tself.isAnimating = false;\n\t}).catch(function (reason) {\n\t\tconsole.error(reason);\n\t});\n}\n\nfunction setOriginal(src) {\n\tif (!src) {\n\t\tthis.originalImg = document.createElement('img');\n\t\tthis.originalImg.className = 'gallery__preview-original';\n\t\tthis.originalImg.style.opacity = 0;\n\t\tvar pageMargin = 0;\n\t\tif (typeof this.options.imgPositions[this.sizeIndex].pagemargin !== 'undefined') {\n\t\t\tpageMargin = this.options.imgPositions[this.sizeIndex].pagemargin;\n\t\t}\n\t\tthis.originalImg.style.maxWidth = 'calc(' + parseInt(Math.abs(this.options.imgPositions[this.sizeIndex].pos.x) * 100) + 'vw - ' + pageMargin + 'px)';\n\t\tthis.originalImg.style.maxHeight = 'calc(' + parseInt(Math.abs(this.options.imgPositions[this.sizeIndex].pos.y) * 100) + 'vh - ' + pageMargin + 'px)';\n\t\tthis.originalImg.style.WebkitTransform = 'translate3d(0,0,0)';\n\t\tthis.originalImg.style.transform = 'translate3d(0,0,0)';\n\t\tsrc = '';\n\t\tvar oldEl = this.previewEl.querySelector('.' + this.originalImg.className);\n\t\tif (oldEl) {\n\t\t\tsrc = oldEl.src;\n\t\t\toldEl.remove();\n\t\t}\n\t\tthis.previewEl.appendChild(this.originalImg);\n\t}\n\n\tthis.originalImg.setAttribute('src', src);\n}\n\nfunction originalImageLoadPromise() {\n\treturn imageLoadPromise(this.originalImg);\n}\n\nfunction imageLoadPromise(img) {\n\tvar imageLoadPromise = function imageLoadPromise(resolve, reject) {\n\t\tif (!img.getAttribute('src')) {\n\t\t\treject('no src found for original image');\n\t\t}\n\n\t\tvar imageLoad = function imageLoad() {\n\t\t\tif (img.complete) {\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\treject('image not loaded: ' + img.getAttribute('src'));\n\t\t\t}\n\t\t};\n\n\t\tif (img.complete) {\n\t\t\tresolve();\n\t\t} else {\n\t\t\timg.onload = imageLoad.bind(this);\n\t\t}\n\t};\n\n\treturn new Promise(imageLoadPromise.bind(this));\n}\n\nfunction gridImagesLoaded() {\n\treturn this.items.map(function (item) {\n\t\tvar img = item.querySelector('img');\n\t\tif (!img) {\n\t\t\treturn;\n\t\t}\n\t\treturn imageLoadPromise(img);\n\t});\n}\n\nfunction setClone(src, settings) {\n\tif (!src) {\n\t\tthis.cloneImg = document.createElement('img');\n\t\tthis.cloneImg.className = 'gallery__preview-clone';\n\t\tsrc = '';\n\t\tthis.cloneImg.style.opacity = 0;\n\t\tthis.previewEl.appendChild(this.cloneImg);\n\t} else {\n\t\tthis.cloneImg.style.opacity = 1;\n\t\tthis.cloneImg.style.width = settings.width + 'px';\n\t\tthis.cloneImg.style.height = settings.height + 'px';\n\t\tthis.cloneImg.style.top = settings.top + 'px';\n\t\tthis.cloneImg.style.left = settings.left + 'px';\n\t}\n\n\tthis.cloneImg.setAttribute('src', src);\n}\n\nfunction closeItem() {\n\tif (!this.isExpanded || this.isAnimating) {\n\t\treturn;\n\t}\n\tthis.isExpanded = false;\n\tthis.isAnimating = true;\n\n\tvar item = this.items[this.current],\n\t    itemImage = item.querySelector('img'),\n\t    itemImageBCR = itemImage.getBoundingClientRect(),\n\t    self = this;\n\n\tthis.previewEl.classList.remove('gallery__preview--open');\n\n\tthis.originalImg.classList.add('gallery__preview-original--animate');\n\n\tvar win = getWinSize(),\n\t    dx = itemImageBCR.left + itemImage.offsetWidth / 2 - ((this.options.imgPositions[this.sizeIndex].pos.x > 0 ? 1 - Math.abs(this.options.imgPositions[this.sizeIndex].pos.x) : Math.abs(this.options.imgPositions[this.sizeIndex].pos.x)) * win.width + this.options.imgPositions[this.sizeIndex].pos.x * win.width / 2),\n\t    dy = itemImageBCR.top + itemImage.offsetHeight / 2 - ((this.options.imgPositions[this.sizeIndex].pos.y > 0 ? 1 - Math.abs(this.options.imgPositions[this.sizeIndex].pos.y) : Math.abs(this.options.imgPositions[this.sizeIndex].pos.y)) * win.height + this.options.imgPositions[this.sizeIndex].pos.y * win.height / 2),\n\t    z = itemImage.offsetWidth / this.originalImg.offsetWidth;\n\n\tthis.originalImg.style.WebkitTransform = 'translate3d(' + dx + 'px, ' + dy + 'px, 0) scale3d(' + z + ', ' + z + ', 1)';\n\tthis.originalImg.style.transform = 'translate3d(' + dx + 'px, ' + dy + 'px, 0) scale3d(' + z + ', ' + z + ', 1)';\n\n\tonEndTransition(this.originalImg).then(function () {\n\t\tself.previewDescriptionEl.innerHTML = '';\n\t\titem.classList.remove('gallery__item--current');\n\t\tsetTimeout(function () {\n\t\t\tself.originalImg.style.opacity = 0;\n\t\t}, 60);\n\t}).then(function () {\n\t\treturn onEndTransition(self.originalImg);\n\t}).then(function () {\n\t\tself.originalImg.classList.remove('gallery__preview-original--animate');\n\t\tself.originalImg.style.WebkitTransform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\t\tself.originalImg.style.transform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\n\t\tself.isAnimating = false;\n\t}).catch(function (reason) {\n\t\tconsole.error(reason);\n\t});\n}\n\nfunction nextItem() {\n\tslideItem.call(this, 50, getNextItem);\n}\n\nfunction previousItem() {\n\tslideItem.call(this, -50, getPreviousItem);\n}\n\nfunction slideItem(changeDistance, getItemCb) {\n\tvar _this = this;\n\n\t// if preview is closed or animation is happening do nothing\n\tif (!this.isExpanded || this.isAnimating) {\n\t\treturn;\n\t}\n\n\tvar lastItem = this.items[this.current]; //get the current item\n\tvar nextItem = getItemCb(lastItem); //get the next item\n\tif (!lastItem || !nextItem || !nextItem.classList.contains('gallery__item')) {\n\t\t//if there is no next item do nothing\n\t\treturn;\n\t}\n\n\tthis.isAnimating = true;\n\tthis.current = this.items.indexOf(nextItem); //update current index\n\n\tlastItem.classList.remove('gallery__item--current');\n\tnextItem.classList.add('gallery__item--current');\n\n\tupdateSlideBtnStatus.call(this, nextItem);\n\n\t/*\n set the cloned thumbnail of the next item\n \t\t* don't transition the cloned thumbnail\n \t\t* set it to the final position\n */\n\tvar itemImage = nextItem.querySelector('img'),\n\t    itemImageBCR = itemImage.getBoundingClientRect();\n\n\tsetClone.call(this, itemImage.src, {\n\t\twidth: itemImage.offsetWidth,\n\t\theight: itemImage.offsetHeight,\n\t\tleft: itemImageBCR.left,\n\t\ttop: itemImageBCR.top\n\t});\n\n\tvar pageMargin = 0;\n\tif (typeof this.options.imgPositions[this.sizeIndex].pagemargin !== 'undefined') {\n\t\tpageMargin = this.options.imgPositions[this.sizeIndex].pagemargin;\n\t}\n\n\tif (!changeDistance) {\n\t\tchangeDistance = 50;\n\t}\n\n\tvar win = getWinSize(),\n\t    originalSizeArr = nextItem.getAttribute('data-size').split('x'),\n\t    originalSize = { width: originalSizeArr[0], height: originalSizeArr[1] },\n\t    dx = (this.options.imgPositions[this.sizeIndex].pos.x > 0 ? 1 - Math.abs(this.options.imgPositions[this.sizeIndex].pos.x) : Math.abs(this.options.imgPositions[this.sizeIndex].pos.x)) * win.width + this.options.imgPositions[this.sizeIndex].pos.x * win.width / 2 - itemImageBCR.left - 0.5 * itemImage.offsetWidth,\n\t    dy = (this.options.imgPositions[this.sizeIndex].pos.y > 0 ? 1 - Math.abs(this.options.imgPositions[this.sizeIndex].pos.y) : Math.abs(this.options.imgPositions[this.sizeIndex].pos.y)) * win.height + this.options.imgPositions[this.sizeIndex].pos.y * win.height / 2 - itemImageBCR.top - 0.5 * itemImage.offsetHeight,\n\t    z = Math.min(Math.min(win.width * Math.abs(this.options.imgPositions[this.sizeIndex].pos.x) - pageMargin, originalSize.width - pageMargin) / itemImage.offsetWidth, Math.min(win.height * Math.abs(this.options.imgPositions[this.sizeIndex].pos.y) - pageMargin, originalSize.height - pageMargin) / itemImage.offsetHeight),\n\t    changeDistanceDx = dx + changeDistance;\n\n\tvar cloneTransform = 'translate3d(' + changeDistanceDx + 'px, ' + dy + 'px, 0) scale3d(' + z + ', ' + z + ', 1)';\n\tthis.cloneImg.style.transition = 'none';\n\tthis.cloneImg.style.WebkitTransform = cloneTransform;\n\tthis.cloneImg.style.transform = cloneTransform;\n\n\tvar descriptionEl = nextItem.querySelector('.gallery__description');\n\tif (descriptionEl) {\n\t\tthis.emptyPreviewDescriptionEl.classList.add('gallery__preview-description--animate');\n\t\tthis.previewDescriptionEl.classList.add('gallery__preview-description--animate');\n\n\t\tthis.emptyPreviewDescriptionEl.innerHTML = descriptionEl.innerHTML;\n\n\t\tthis.emptyPreviewDescriptionEl.style.transition = 'none';\n\t\tthis.emptyPreviewDescriptionEl.style.opacity = 0;\n\t\tvar emptyDescriptionTransform = 'translate3d(0, ' + changeDistance + 'px, 0)';\n\t\tthis.emptyPreviewDescriptionEl.style.WebkitTransform = emptyDescriptionTransform;\n\t\tthis.emptyPreviewDescriptionEl.style.transform = emptyDescriptionTransform;\n\t}\n\n\tvar self = this;\n\n\trequestAnimationFramePromise().then(function () {\n\t\t//old original image fade out\n\t\tvar originalImgTransform = 'translate3d(-' + changeDistance + 'px, 0, 0)';\n\t\tself.originalImg.classList.add('gallery__preview-original--animate');\n\t\tself.originalImg.style.opacity = 0;\n\t\tself.originalImg.style.WebkitTransform = originalImgTransform;\n\t\tself.originalImg.style.transform = originalImgTransform;\n\n\t\t//fade in cloned image\n\t\tself.cloneImg.style.transition = '';\n\t\tvar cloneTransform = 'translate3d(' + dx + 'px, ' + dy + 'px, 0) scale3d(' + z + ', ' + z + ', 1)';\n\t\tself.cloneImg.style.WebkitTransform = cloneTransform;\n\t\tself.cloneImg.style.transform = cloneTransform;\n\t\tself.cloneImg.style.opacity = 1;\n\n\t\tvar descriptionTransform = 'translate3d(0, -' + changeDistance + 'px, 0)';\n\t\tself.previewDescriptionEl.style.opacity = 0;\n\t\tself.previewDescriptionEl.style.WebkitTransform = descriptionTransform;\n\t\tself.previewDescriptionEl.style.transform = descriptionTransform;\n\n\t\tself.emptyPreviewDescriptionEl.style.transition = '';\n\t\tself.emptyPreviewDescriptionEl.style.opacity = 1;\n\t\tvar emptyDescriptionTransform = 'translate3d(0, 0, 0)';\n\t\tself.emptyPreviewDescriptionEl.style.WebkitTransform = emptyDescriptionTransform;\n\t\tself.emptyPreviewDescriptionEl.style.transform = emptyDescriptionTransform;\n\n\t\tvar tmpDescription = self.previewDescriptionEl;\n\t\tself.previewDescriptionEl = self.emptyPreviewDescriptionEl;\n\t\tself.emptyPreviewDescriptionEl = tmpDescription;\n\t}).then(function () {\n\t\treturn onEndTransition(self.originalImg);\n\t}) //when old main image has fade out\n\t.then(function () {\n\t\t// rest position of original image with no transition\n\t\tself.originalImg.classList.remove('gallery__preview-original--animate');\n\t\tvar originalImgTransform = 'translate3d(0, 0, 0)';\n\t\tself.originalImg.style.WebkitTransform = originalImgTransform;\n\t\tself.originalImg.style.transform = originalImgTransform;\n\t}).then(function () {\n\t\treturn setOriginal.call(self, nextItem.querySelector('a').getAttribute('href'));\n\t}) //set new main image\n\t.then(function () {\n\t\treturn imageLoadPromise.call(self, self.originalImg);\n\t}) //when this has loaded\n\t.then(function () {\n\t\tself.originalImg.style.transition = '';\n\t\tself.originalImg.style.opacity = 1;\n\t}).then(function () {\n\t\treturn onEndTransition(self.originalImg);\n\t}).then(function () {\n\t\tself.cloneImg.style.opacity = 0;\n\t\tself.cloneImg.style.WebkitTransform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\t\tself.cloneImg.style.transform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\t\t_this.cloneImg.style.transition = '';\n\n\t\tself.emptyPreviewDescriptionEl.classList.remove('gallery__preview-description--animate');\n\t\tself.previewDescriptionEl.classList.remove('gallery__preview-description--animate');\n\n\t\tself.emptyPreviewDescriptionEl.innerHTML = '';\n\t\tself.emptyPreviewDescriptionEl.style.opacity = '';\n\t\tself.emptyPreviewDescriptionEl.style.WebkitTransform = '';\n\t\tself.emptyPreviewDescriptionEl.style.transform = '';\n\n\t\tself.previewDescriptionEl.style.opacity = '';\n\t\tself.previewDescriptionEl.style.WebkitTransform = '';\n\t\tself.previewDescriptionEl.style.transform = '';\n\n\t\tself.isAnimating = false;\n\t}).catch(function (reason) {\n\t\tconsole.error(reason);\n\t});\n}\n\nfunction getNextItem(currentItem) {\n\tvar item = currentItem;\n\twhile (item = item.nextElementSibling) {\n\t\tif (item.getAttribute('data-size')) {\n\t\t\treturn item;\n\t\t}\n\t}\n\treturn null;\n}\n\nfunction getPreviousItem(currentItem) {\n\tvar item = currentItem;\n\twhile (item = item.previousElementSibling) {\n\t\tif (item.getAttribute('data-size')) {\n\t\t\treturn item;\n\t\t}\n\t}\n\treturn null;\n}\n\nfunction updateSlideBtnStatus(currentItem) {\n\tif (!getNextItem(currentItem)) {\n\t\tthis.nextBtn.classList.add('gallery__preview-btn--disabled');\n\t} else {\n\t\tthis.nextBtn.classList.remove('gallery__preview-btn--disabled');\n\t}\n\n\tif (!getPreviousItem(currentItem)) {\n\t\tthis.previousBtn.classList.add('gallery__preview-btn--disabled');\n\t} else {\n\t\tthis.previousBtn.classList.remove('gallery__preview-btn--disabled');\n\t}\n}\n\nfunction getWinSize() {\n\treturn {\n\t\twidth: document.documentElement.clientWidth,\n\t\theight: window.innerHeight\n\t};\n}\n\n//import poly from './util/polyfills';\n\n//import svg4everybody from '../vendor/svg4everybody';\nfunction init() {\n\t//poly();\n\n\t//svg4everybody();\n\tsetupGalleryGrid();\n}\n\nfunction setupGalleryGrid() {\n\tcreateGalleryGrid$1('.js-gallery', {\n\t\timgPositions: [{ pos: { x: 1, y: -0.5 }, pagemargin: 30 }, { mq: '48em', pos: { x: -0.5, y: 1 }, pagemargin: 30 }],\n\t\tsizes: [{ columns: 2, gutter: 15 }, { mq: '560px', columns: 2, gutter: 15 }, { mq: '768px', columns: 3, gutter: 15 }, { mq: '920px', columns: 4, gutter: 15 }, { mq: '1180px', columns: 5, gutter: 15 }]\n\t});\n}\n\nif (document.readyState != 'loading') {\n\tinit();\n} else {\n\tdocument.addEventListener('DOMContentLoaded', init);\n}\n\n}());\n","'use strict';\n\nconst animationEndEventName = ['animationend', 'webkitAnimationEnd', 'MSAnimationEnd', 'oAnimationEnd'];\n\nfunction onEndAnimation(el){\n\treturn new Promise(function(resolve, reject){\n\t\tconst onEndCallbackFn = function(evt){\n\t\t\tfor (let i = 0; i < animationEndEventName.length; i++) {\n\t\t\t\tel.removeEventListener(animationEndEventName[i], onEndCallbackFn);\n\t\t\t}\n\t\t\tresolve();\n\t\t};\n\n\t\tif(!el){\n\t\t\treject('No element passed to on End Animation');\n\t\t}\n\n\t\tfor (let i = 0; i < animationEndEventName.length; i++) {\n\t\t\tel.addEventListener(animationEndEventName[i], onEndCallbackFn);\n\t\t}\n\t});\n}\n\nconst transitionEndName = ['webkitTransitionEnd', 'transitionend', 'msTransitionEnd', 'oTransitionEnd'];\n\nfunction onEndTransition(el){\n\treturn new Promise(function(resolve, reject){\n\t\tconst onEndCallbackFn = function(ev){\n\t\t\tfor (let i = 0; i < transitionEndName.length; i++) {\n\t\t\t\tel.removeEventListener(transitionEndName[i], onEndCallbackFn);\n\t\t\t}\n\t\t\tresolve();\n\t\t};\n\n\t\tif(!el){\n\t\t\treject('No element passed to on End Transition');\n\t\t}\n\n\t\tfor (let i = 0; i < transitionEndName.length; i++) {\n\t\t\tel.addEventListener(transitionEndName[i], onEndCallbackFn);\n\t\t}\n\t});\n}\n\nfunction extend(){\n\tconst objects = arguments;\n\tif(objects.length < 2){\n\t\treturn objects[0];\n\t}\n\tconst combinedObject = objects[0];\n\n\tfor(let i = 1; i < objects.length; i++){\n\t\tif(!objects[i]){\n\t\t\tcontinue;\n\t\t}\n\t\tfor(let key in objects[i]){\n\t\t\tcombinedObject[key] = objects[i][key];\n\t\t}\n\t}\n\n\treturn combinedObject;\n}\n\nfunction requestAnimationFramePromise(){\n\treturn new Promise((resolve, reject) => requestAnimationFrame(resolve));\n}\n\nexport {onEndAnimation, onEndTransition, extend, requestAnimationFramePromise};\n","import {onEndTransition, extend, requestAnimationFramePromise} from '../util/util';\nimport Bricks from '../../vendor/brick';\n\nconst GalleryGrid = {\n\tsetup: setup,\n\tinit: init,\n\n\topenItem: openItem,\n\tcloseItem: closeItem,\n\tnextItem: nextItem,\n\tpreviousItem: previousItem\n};\n\nconst defaultOptions = {\n\t// x and y can have values from 0 to 1 (percentage). If negative then it means the alignment is left and/or top rather than right and/or bottom\n\t// so, as an example, if we want our large image to be positioned vertically on 25% of the screen and centered horizontally the values would be x:1,y:-0.25\n\timgPositions: [\n\t\t{pos: { x : 1, y : 1 }, pagemargin : 0}\n\t],\n\tsizes: [\n\t\t{ columns: 1, gutter: 30},\n\t\t{ mq: '1024px', columns: 5, gutter: 30}\n\t]\n};\n\nfunction createGalleryGrid(el, options){\n\tconst galGridObj = Object.create(GalleryGrid);\n\tgalGridObj.setup(el, options);\n\tgalGridObj.init();\n\treturn galGridObj;\n}\n\nfunction setup(elClass, options){\n\tthis.elClass = elClass;\n\tthis.el = document.querySelector(elClass);\n\tif(!this.el){\n\t\treturn;\n\t}\n\n\tthis.options = extend({}, defaultOptions, options);\n\tthis.sizeIndex = getSizeIndex.call(this);\n\tthis.items = Array.prototype.slice.call(this.el.querySelectorAll('.gallery__item'));\n\tthis.previewEl = this.el.nextElementSibling;\n\tthis.isExpanded = false;\n\tthis.isAnimating = false;\n\tthis.ticking = false;\n\tthis.closeBtn = this.previewEl.querySelector('.gallery__preview-close');\n\tconst previewDescriptions = this.previewEl.querySelectorAll('.gallery__preview-description');\n\tthis.previewDescriptionEl = previewDescriptions[0];\n\tthis.emptyPreviewDescriptionEl = previewDescriptions[1];\n\n\tthis.previousBtn = this.previewEl.querySelector('.gallery__preview-btn--previous');\n\tthis.nextBtn = this.previewEl.querySelector('.gallery__preview-btn--next');\n\n\tthis.openItem = this.openItem.bind(this);\n\tthis.closeItem = this.closeItem.bind(this);\n\tthis.nextItem = this.nextItem.bind(this);\n\tthis.previousItem = this.previousItem.bind(this);\n}\n\nfunction init(){\n\tif(!this.el){\n\t\treturn;\n\t}\n\n\tconst initAfterImagesLoad = function(){\n\t\tthis.bricks = Bricks({\n\t\t\tcontainer: this.elClass,\n\t\t\tpacked: 'data-packed',\n\t\t\tsizes: this.options.sizes\n\t\t});\n\n\t\tthis.bricks\n\t\t.resize(true)\n\t\t.pack();\n\n\t\tthis.el.classList.add('gallery--loaded');\n\n\t\taddEventListeners.call(this);\n\t\tsetOriginal.call(this);\n\t\tsetClone.call(this);\n\t};\n\n\tPromise.all(gridImagesLoaded.call(this))\n\t.then(initAfterImagesLoad.bind(this));\n}\n\nfunction addEventListeners(){\n\tconst self = this;\n\n\tthis.items.forEach(function(item){\n\t\tif(!item.querySelector('.gallery__image')){\n\t\t\treturn;\n\t\t}\n\t\titem.addEventListener('click', function(evt){\n\t\t\tevt.preventDefault();\n\t\t\tself.openItem(item);\n\t\t});\n\t});\n\n\tthis.closeBtn.addEventListener('click', this.closeItem);\n\tthis.previousBtn.addEventListener('click', this.previousItem);\n\tthis.nextBtn.addEventListener('click', this.nextItem);\n\twindow.addEventListener('resize', resizeFrame.bind(this));\n\twindow.addEventListener('keydown', function(evt){\n\t\tif(evt.key == \"Escape\"){\n\t\t\tthis.closeItem();\n\t\t}\n\t\tif(evt.key == \"ArrowRight\"){\n\t\t\tthis.nextItem();\n\t\t}\n\t\tif(evt.key == \"ArrowLeft\"){\n\t\t\tthis.previousItem();\n\t\t}\n\t}.bind(this));\n}\n\nfunction getSizeIndex(){\n\tconst newSizeIndex = this.options.imgPositions\n\t\t\t.map(size => size.mq && window.matchMedia(`(min-width: ${ size.mq })`).matches)\n\t\t\t.indexOf(true);\n\treturn ~newSizeIndex ? newSizeIndex : 0;\n}\n\nfunction resizeFrame() {\n\tif(!this.ticking) {\n\t\trequestAnimationFrame(resizeHandler.bind(this));\n\t\tthis.ticking = true;\n\t}\n}\n\nfunction resizeHandler() {\n\tlet newSizeIndex = getSizeIndex.call(this);\n\tif(this.sizeIndex !== newSizeIndex){\n\t\tthis.sizeIndex = newSizeIndex;\n\t\tsetOriginal.call(this);\n\n\t\tif(this.isExpanded){\n\t\t\tthis.originalImg.style.opacity = 1;\n\t\t}\n\t}\n\tthis.ticking = false;\n}\n\nfunction openItem(item){\n\tif(this.isAnimating || this.isExpanded){\n\t\treturn;\n\t}\n\tthis.isAnimating = true;\n\tthis.isExpanded = true;\n\n\tupdateSlideBtnStatus.call(this, item);\n\n\tconst itemImage = item.querySelector('img'),\n\t\titemImageBCR = itemImage.getBoundingClientRect();\n\n\tthis.current = this.items.indexOf(item);\n\n\tsetOriginal.call(this, item.querySelector('a').getAttribute('href'));\n\n\tsetClone.call(this, itemImage.src, {\n\t\twidth: itemImage.offsetWidth,\n\t\theight: itemImage.offsetHeight,\n\t\tleft: itemImageBCR.left,\n\t\ttop: itemImageBCR.top\n\t});\n\n\titem.classList.add('gallery__item--current');\n\n\tlet pageMargin = 0;\n\tif(typeof this.options.imgPositions[this.sizeIndex].pagemargin !== 'undefined'){\n\t\tpageMargin = this.options.imgPositions[this.sizeIndex].pagemargin;\n\t}\n\n\tconst win = getWinSize(),\n\t\toriginalSizeArr = item.getAttribute('data-size').split('x'),\n\t\toriginalSize = {width: originalSizeArr[0], height: originalSizeArr[1]},\n\t\tdx = ((this.options.imgPositions[this.sizeIndex].pos.x > 0 ? 1-Math.abs(this.options.imgPositions[this.sizeIndex].pos.x) : Math.abs(this.options.imgPositions[this.sizeIndex].pos.x)) * win.width + this.options.imgPositions[this.sizeIndex].pos.x * win.width/2) - itemImageBCR.left - 0.5 * itemImage.offsetWidth,\n\t\tdy = ((this.options.imgPositions[this.sizeIndex].pos.y > 0 ? 1-Math.abs(this.options.imgPositions[this.sizeIndex].pos.y) : Math.abs(this.options.imgPositions[this.sizeIndex].pos.y)) * win.height + this.options.imgPositions[this.sizeIndex].pos.y * win.height/2) - itemImageBCR.top - 0.5 * itemImage.offsetHeight,\n\t\tz = Math.min( Math.min(win.width*Math.abs(this.options.imgPositions[this.sizeIndex].pos.x) - pageMargin, originalSize.width - pageMargin)/itemImage.offsetWidth, Math.min(win.height*Math.abs(this.options.imgPositions[this.sizeIndex].pos.y) - pageMargin, originalSize.height - pageMargin)/itemImage.offsetHeight );\n\n\tconst transform = `translate3d(${dx}px, ${dy}px, 0) scale3d(${z}, ${z}, 1)`;\n\tthis.cloneImg.style.WebkitTransform = transform;\n\tthis.cloneImg.style.transform = transform;\n\n\tconst descriptionEl = item.querySelector('.gallery__description');\n\tif(descriptionEl){\n\t\tthis.previewDescriptionEl.innerHTML = descriptionEl.innerHTML;\n\t}\n\n\tvar self = this;\n\tsetTimeout(function() {\n\t\tself.previewEl.classList.add('gallery__preview--open');\n\t}, 0);\n\n\tPromise.all([onEndTransition(this.cloneImg), originalImageLoadPromise.call(this)])\n\t.then(function(){\n\t\tself.originalImg.style.opacity = 1;\n\t})\n\t.then(() => onEndTransition(self.originalImg))\n\t.then(function(){\n\t\tself.cloneImg.style.opacity = 0;\n\t\tself.cloneImg.style.WebkitTransform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\t\tself.cloneImg.style.transform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\n\t\tself.isAnimating = false;\n\t})\n\t.catch(function(reason){\n\t\tconsole.error(reason);\n\t});\n}\n\nfunction setOriginal(src){\n\tif(!src){\n\t\tthis.originalImg = document.createElement('img');\n\t\tthis.originalImg.className = 'gallery__preview-original';\n\t\tthis.originalImg.style.opacity = 0;\n\t\tlet pageMargin = 0;\n\t\tif(typeof this.options.imgPositions[this.sizeIndex].pagemargin !== 'undefined'){\n\t\t\tpageMargin = this.options.imgPositions[this.sizeIndex].pagemargin;\n\t\t}\n\t\tthis.originalImg.style.maxWidth = 'calc(' + parseInt(Math.abs(this.options.imgPositions[this.sizeIndex].pos.x)*100) + 'vw - ' + pageMargin + 'px)';\n\t\tthis.originalImg.style.maxHeight = 'calc(' + parseInt(Math.abs(this.options.imgPositions[this.sizeIndex].pos.y)*100) + 'vh - ' + pageMargin + 'px)';\n\t\tthis.originalImg.style.WebkitTransform = 'translate3d(0,0,0)';\n\t\tthis.originalImg.style.transform = 'translate3d(0,0,0)';\n\t\tsrc = '';\n\t\tconst oldEl = this.previewEl.querySelector('.'+this.originalImg.className);\n\t\tif(oldEl){\n\t\t\tsrc = oldEl.src;\n\t\t\toldEl.remove();\n\t\t}\n\t\tthis.previewEl.appendChild(this.originalImg);\n\t}\n\n\tthis.originalImg.setAttribute('src', src);\n}\n\nfunction originalImageLoadPromise(){\n\treturn imageLoadPromise(this.originalImg);\n}\n\nfunction imageLoadPromise(img){\n\tconst imageLoadPromise = function(resolve, reject){\n\t\tif(!img.getAttribute('src')){\n\t\t\treject('no src found for original image');\n\t\t}\n\n\t\tconst imageLoad = function(){\n\t\t\tif(img.complete){\n\t\t\t\tresolve();\n\t\t\t}else{\n\t\t\t\treject('image not loaded: '+img.getAttribute('src'));\n\t\t\t}\n\t\t};\n\n\t\tif(img.complete){\n\t\t\tresolve();\n\t\t}else{\n\t\t\timg.onload = imageLoad.bind(this);\n\t\t}\n\t};\n\n\treturn new Promise(imageLoadPromise.bind(this));\n}\n\nfunction gridImagesLoaded(){\n\treturn this.items.map(function(item){\n\t\tconst img = item.querySelector('img');\n\t\tif(!img){\n\t\t\treturn;\n\t\t}\n\t\treturn imageLoadPromise(img);\n\t});\n}\n\nfunction setClone(src, settings){\n\tif(!src) {\n\t\tthis.cloneImg = document.createElement('img');\n\t\tthis.cloneImg.className = 'gallery__preview-clone';\n\t\tsrc = '';\n\t\tthis.cloneImg.style.opacity = 0;\n\t\tthis.previewEl.appendChild(this.cloneImg);\n\t}else{\n\t\tthis.cloneImg.style.opacity = 1;\n\t\tthis.cloneImg.style.width = settings.width  + 'px';\n\t\tthis.cloneImg.style.height = settings.height  + 'px';\n\t\tthis.cloneImg.style.top = settings.top  + 'px';\n\t\tthis.cloneImg.style.left = settings.left  + 'px';\n\t}\n\n\tthis.cloneImg.setAttribute('src', src);\n}\n\nfunction closeItem(){\n\tif(!this.isExpanded || this.isAnimating){\n\t\treturn;\n\t}\n\tthis.isExpanded = false;\n\tthis.isAnimating = true;\n\n\tconst item = this.items[this.current],\n\t\titemImage = item.querySelector('img'),\n\t\titemImageBCR = itemImage.getBoundingClientRect(),\n\t\tself = this;\n\n\tthis.previewEl.classList.remove('gallery__preview--open');\n\n\tthis.originalImg.classList.add('gallery__preview-original--animate');\n\n\tvar win = getWinSize(),\n\t\tdx = itemImageBCR.left + itemImage.offsetWidth/2 - ((this.options.imgPositions[this.sizeIndex].pos.x > 0 ? 1-Math.abs(this.options.imgPositions[this.sizeIndex].pos.x) : Math.abs(this.options.imgPositions[this.sizeIndex].pos.x)) * win.width + this.options.imgPositions[this.sizeIndex].pos.x * win.width/2),\n\t\tdy = itemImageBCR.top + itemImage.offsetHeight/2 - ((this.options.imgPositions[this.sizeIndex].pos.y > 0 ? 1-Math.abs(this.options.imgPositions[this.sizeIndex].pos.y) : Math.abs(this.options.imgPositions[this.sizeIndex].pos.y)) * win.height + this.options.imgPositions[this.sizeIndex].pos.y * win.height/2),\n\t\tz = itemImage.offsetWidth/this.originalImg.offsetWidth;\n\n\tthis.originalImg.style.WebkitTransform = `translate3d(${dx}px, ${dy}px, 0) scale3d(${z}, ${z}, 1)`;\n\tthis.originalImg.style.transform = `translate3d(${dx}px, ${dy}px, 0) scale3d(${z}, ${z}, 1)`;\n\n\tonEndTransition(this.originalImg)\n\t.then(function(){\n\t\tself.previewDescriptionEl.innerHTML = '';\n\t\titem.classList.remove('gallery__item--current');\n\t\tsetTimeout(function() {\n\t\t\tself.originalImg.style.opacity = 0;\n\t\t}, 60);\n\t})\n\t.then(() => onEndTransition(self.originalImg))\n\t.then(function(){\n\t\tself.originalImg.classList.remove('gallery__preview-original--animate');\n\t\tself.originalImg.style.WebkitTransform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\t\tself.originalImg.style.transform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\n\t\tself.isAnimating = false;\n\t})\n\t.catch(function(reason){\n\t\tconsole.error(reason);\n\t});\n}\n\nfunction nextItem(){\n\tslideItem.call(this, 50, getNextItem);\n}\n\nfunction previousItem(){\n\tslideItem.call(this, -50, getPreviousItem);\n}\n\nfunction slideItem(changeDistance, getItemCb){\n\t// if preview is closed or animation is happening do nothing\n\tif(!this.isExpanded || this.isAnimating){\n\t\treturn;\n\t}\n\n\tconst lastItem = this.items[this.current]; //get the current item\n\tconst nextItem = getItemCb(lastItem); //get the next item\n\tif(!lastItem || !nextItem || !nextItem.classList.contains('gallery__item')){ //if there is no next item do nothing\n\t\treturn;\n\t}\n\n\tthis.isAnimating = true;\n\tthis.current = this.items.indexOf(nextItem); //update current index\n\n\tlastItem.classList.remove('gallery__item--current');\n\tnextItem.classList.add('gallery__item--current');\n\n\tupdateSlideBtnStatus.call(this, nextItem);\n\n\t/*\n\tset the cloned thumbnail of the next item\n\t\t\t* don't transition the cloned thumbnail\n\t\t\t* set it to the final position\n\t*/\n\tconst itemImage = nextItem.querySelector('img'),\n\t\titemImageBCR = itemImage.getBoundingClientRect();\n\n\n\tsetClone.call(this, itemImage.src, {\n\t\twidth: itemImage.offsetWidth,\n\t\theight: itemImage.offsetHeight,\n\t\tleft: itemImageBCR.left,\n\t\ttop: itemImageBCR.top\n\t});\n\n\tlet pageMargin = 0;\n\tif(typeof this.options.imgPositions[this.sizeIndex].pagemargin !== 'undefined'){\n\t\tpageMargin = this.options.imgPositions[this.sizeIndex].pagemargin;\n\t}\n\n\tif(!changeDistance){\n\t\tchangeDistance = 50;\n\t}\n\n\tlet win = getWinSize(),\n\t\toriginalSizeArr = nextItem.getAttribute('data-size').split('x'),\n\t\toriginalSize = {width: originalSizeArr[0], height: originalSizeArr[1]},\n\t\tdx = ((this.options.imgPositions[this.sizeIndex].pos.x > 0 ? 1-Math.abs(this.options.imgPositions[this.sizeIndex].pos.x) : Math.abs(this.options.imgPositions[this.sizeIndex].pos.x)) * win.width + this.options.imgPositions[this.sizeIndex].pos.x * win.width/2) - itemImageBCR.left - 0.5 * itemImage.offsetWidth,\n\t\tdy = ((this.options.imgPositions[this.sizeIndex].pos.y > 0 ? 1-Math.abs(this.options.imgPositions[this.sizeIndex].pos.y) : Math.abs(this.options.imgPositions[this.sizeIndex].pos.y)) * win.height + this.options.imgPositions[this.sizeIndex].pos.y * win.height/2) - itemImageBCR.top - 0.5 * itemImage.offsetHeight,\n\t\tz = Math.min( Math.min(win.width*Math.abs(this.options.imgPositions[this.sizeIndex].pos.x) - pageMargin, originalSize.width - pageMargin)/itemImage.offsetWidth, Math.min(win.height*Math.abs(this.options.imgPositions[this.sizeIndex].pos.y) - pageMargin, originalSize.height - pageMargin)/itemImage.offsetHeight ),\n\t\tchangeDistanceDx = dx + changeDistance;\n\n\tconst cloneTransform = `translate3d(${changeDistanceDx}px, ${dy}px, 0) scale3d(${z}, ${z}, 1)`;\n\tthis.cloneImg.style.transition = 'none';\n\tthis.cloneImg.style.WebkitTransform = cloneTransform;\n\tthis.cloneImg.style.transform = cloneTransform;\n\n\tconst descriptionEl = nextItem.querySelector('.gallery__description');\n\tif(descriptionEl){\n\t\tthis.emptyPreviewDescriptionEl.classList.add('gallery__preview-description--animate');\n\t\tthis.previewDescriptionEl.classList.add('gallery__preview-description--animate');\n\n\t\tthis.emptyPreviewDescriptionEl.innerHTML = descriptionEl.innerHTML;\n\n\t\tthis.emptyPreviewDescriptionEl.style.transition = 'none';\n\t\tthis.emptyPreviewDescriptionEl.style.opacity = 0;\n\t\tconst emptyDescriptionTransform = `translate3d(0, ${changeDistance}px, 0)`;\n\t\tthis.emptyPreviewDescriptionEl.style.WebkitTransform = emptyDescriptionTransform;\n\t\tthis.emptyPreviewDescriptionEl.style.transform = emptyDescriptionTransform;\n\t}\n\n\tconst self = this;\n\n\trequestAnimationFramePromise()\n\t.then(function(){\n\t\t//old original image fade out\n\t\tconst originalImgTransform = `translate3d(-${changeDistance}px, 0, 0)`;\n\t\tself.originalImg.classList.add('gallery__preview-original--animate');\n\t\tself.originalImg.style.opacity = 0;\n\t\tself.originalImg.style.WebkitTransform = originalImgTransform;\n\t\tself.originalImg.style.transform = originalImgTransform;\n\n\t\t//fade in cloned image\n\t\tself.cloneImg.style.transition = '';\n\t\tconst cloneTransform = `translate3d(${dx}px, ${dy}px, 0) scale3d(${z}, ${z}, 1)`;\n\t\tself.cloneImg.style.WebkitTransform = cloneTransform;\n\t\tself.cloneImg.style.transform = cloneTransform;\n\t\tself.cloneImg.style.opacity = 1;\n\n\t\tconst descriptionTransform = `translate3d(0, -${changeDistance}px, 0)`;\n\t\tself.previewDescriptionEl.style.opacity = 0;\n\t\tself.previewDescriptionEl.style.WebkitTransform = descriptionTransform;\n\t\tself.previewDescriptionEl.style.transform = descriptionTransform;\n\n\t\tself.emptyPreviewDescriptionEl.style.transition = '';\n\t\tself.emptyPreviewDescriptionEl.style.opacity = 1;\n\t\tconst emptyDescriptionTransform = `translate3d(0, 0, 0)`;\n\t\tself.emptyPreviewDescriptionEl.style.WebkitTransform = emptyDescriptionTransform;\n\t\tself.emptyPreviewDescriptionEl.style.transform = emptyDescriptionTransform;\n\n\t\tlet tmpDescription = self.previewDescriptionEl;\n\t\tself.previewDescriptionEl = self.emptyPreviewDescriptionEl;\n\t\tself.emptyPreviewDescriptionEl = tmpDescription;\n\t})\n\t.then(() => onEndTransition(self.originalImg)) //when old main image has fade out\n\t.then(() => { // rest position of original image with no transition\n\t\tself.originalImg.classList.remove('gallery__preview-original--animate');\n\t\tconst originalImgTransform = `translate3d(0, 0, 0)`;\n\t\tself.originalImg.style.WebkitTransform = originalImgTransform;\n\t\tself.originalImg.style.transform = originalImgTransform;\n\t})\n\t.then(() => setOriginal.call(self, nextItem.querySelector('a').getAttribute('href'))) //set new main image\n\t.then(() => imageLoadPromise.call(self, self.originalImg)) //when this has loaded\n\t.then(() => {\n\t\tself.originalImg.style.transition = '';\n\t\tself.originalImg.style.opacity = 1;\n\t})\n\t.then(() => onEndTransition(self.originalImg))\n\t.then(() => {\n\t\tself.cloneImg.style.opacity = 0;\n\t\tself.cloneImg.style.WebkitTransform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\t\tself.cloneImg.style.transform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\t\tthis.cloneImg.style.transition = '';\n\n\t\tself.emptyPreviewDescriptionEl.classList.remove('gallery__preview-description--animate');\n\t\tself.previewDescriptionEl.classList.remove('gallery__preview-description--animate');\n\n\t\tself.emptyPreviewDescriptionEl.innerHTML = '';\n\t\tself.emptyPreviewDescriptionEl.style.opacity = '';\n\t\tself.emptyPreviewDescriptionEl.style.WebkitTransform = '';\n\t\tself.emptyPreviewDescriptionEl.style.transform = '';\n\n\t\tself.previewDescriptionEl.style.opacity = '';\n\t\tself.previewDescriptionEl.style.WebkitTransform = '';\n\t\tself.previewDescriptionEl.style.transform = '';\n\n\t\tself.isAnimating = false;\n\t})\n\t.catch(function(reason){\n\t\tconsole.error(reason);\n\t});\n}\n\nfunction getNextItem(currentItem){\n\tlet item = currentItem;\n\twhile(item = item.nextElementSibling){\n\t\tif(item.getAttribute('data-size')){\n\t\t\treturn item;\n\t\t}\n\t}\n\treturn null;\n}\n\nfunction getPreviousItem(currentItem){\n\tlet item = currentItem;\n\twhile(item = item.previousElementSibling){\n\t\tif(item.getAttribute('data-size')){\n\t\t\treturn item;\n\t\t}\n\t}\n\treturn null;\n}\n\nfunction updateSlideBtnStatus(currentItem){\n\tif(!getNextItem(currentItem)){\n\t\tthis.nextBtn.classList.add('gallery__preview-btn--disabled');\n\t}else{\n\t\tthis.nextBtn.classList.remove('gallery__preview-btn--disabled');\n\t}\n\n\tif(!getPreviousItem(currentItem)){\n\t\tthis.previousBtn.classList.add('gallery__preview-btn--disabled');\n\t}else{\n\t\tthis.previousBtn.classList.remove('gallery__preview-btn--disabled');\n\t}\n}\n\nfunction getWinSize(){\n\treturn {\n\t\twidth: document.documentElement.clientWidth,\n\t\theight: window.innerHeight\n\t};\n}\n\nexport default createGalleryGrid;\n","//import poly from './util/polyfills';\n\n//import svg4everybody from '../vendor/svg4everybody';\nimport galleryGrid from './ui/gallery-grid';\n\nlet basePath;\n\nfunction init(){\n\t//poly();\n\n\t//svg4everybody();\n\tsetupGalleryGrid();\n}\n\nfunction setupGalleryGrid(){\n\tgalleryGrid('.js-gallery', {\n\t\timgPositions: [\n\t\t\t{ pos: { x : 1, y : -0.5 }, pagemargin: 30 },\n\t\t\t{ mq: '48em', pos: { x : -0.5, y : 1 }, pagemargin: 30 }\n\t\t],\n\t\tsizes: [\n\t\t\t{ columns: 2, gutter: 15},\n\t\t\t{ mq: '560px', columns: 2, gutter: 15},\n\t\t\t{ mq: '768px', columns: 3, gutter: 15},\n\t\t\t{ mq: '920px', columns: 4, gutter: 15},\n\t\t\t{ mq: '1180px', columns: 5, gutter: 15}\n\t\t]\n\t});\n}\n\nif(document.readyState != 'loading'){\n\tinit();\n}else{\n\tdocument.addEventListener('DOMContentLoaded', init);\n}\n","export default (object = {}) => {\r\n  const events = {}\r\n\r\n  function on(name, handler) {\r\n    events[name] = events[name] || []\r\n    events[name].push(handler)\r\n    return this\r\n  }\r\n\r\n  function once(name, handler) {\r\n    handler._once = true\r\n    on(name, handler)\r\n    return this\r\n  }\r\n\r\n  function off(name, handler = false) {\r\n    handler\r\n      ? events[name].splice(events[name].indexOf(handler), 1)\r\n      : delete events[name]\r\n\r\n    return this\r\n  }\r\n\r\n  function emit(name, ...args) {\r\n    // cache the events, to avoid consequences of mutation\r\n    const cache = events[name] && events[name].slice()\r\n\r\n    // only fire handlers if they exist\r\n    cache && cache.forEach(handler => {\r\n      // remove handlers added with 'once'\r\n      handler._once && off(name, handler)\r\n\r\n      // set 'this' context, pass args to handlers\r\n      handler.apply(this, args)\r\n    })\r\n\r\n    return this\r\n  }\r\n\r\n  const out = object;\r\n  out.on = on;\r\n  out.ounce = once;\r\n  out.off = off;\r\n  out.emit = emit;\r\n\r\n  return out;\r\n}","import knot from './knot.js';\n\nexport default (options = {}) => {\n\t// globals\n\n\tlet persist;           // updating or packing all elements?\n\tlet ticking;           // for debounced resize\n\n\tlet sizeIndex;\n\tlet sizeDetail;\n\n\tlet columnHeights;\n\n\tlet nodes;\n\tlet nodesWidth;\n\tlet nodesHeights;\n\n\t// options\n\tconst container = document.querySelector(options.container);\n\tconst packed    = options.packed.indexOf('data-') === 0 ? options.packed : `data-${ options.packed }`;\n\tconst sizes     = options.sizes.slice().reverse();\n\n\tconst selectors = {\n\t\tall: `${ options.container } > *`,\n\t\tnew: `${ options.container } > *:not([${ packed }])`\n\t};\n\n\t// series\n\n\tconst setup = [\n\t\tsetSizeIndex,\n\t\tsetSizeDetail,\n\t\tsetColumns\n\t];\n\n\tconst run = [\n\t\tsetNodes,\n\t\tsetNodesDimensions,\n\t\tsetNodesStyles,\n\t\tsetContainerStyles\n\t];\n\n\t// instance\n\n\tconst instance = knot({\n\t\tpack,\n\t\tupdate,\n\t\tresize\n\t});\n\n\treturn instance;\n\n\t// general helpers\n\n\tfunction runSeries(functions) {\n\t\tfunctions.forEach(func => func());\n\t}\n\n\t// array helpers\n\n\tfunction toArray(selector) {\n\t\treturn Array.prototype.slice.call(document.querySelectorAll(selector));\n\t}\n\n\tfunction fillArray(length) {\n\t\treturn Array.apply(null, Array(length)).map(() => 0);\n\t}\n\n\t// size helpers\n\n\tfunction getSizeIndex() {\n\t\t// find index of widest matching media query\n\t\treturn sizes\n\t\t\t.map(size => size.mq && window.matchMedia(`(min-width: ${ size.mq })`).matches)\n\t\t\t.indexOf(true);\n\t}\n\n\tfunction setSizeIndex() {\n\t\tsizeIndex = getSizeIndex();\n\t}\n\n\tfunction setSizeDetail() {\n\t\t// if no media queries matched, use the base case\n\t\tsizeDetail = sizeIndex === -1\n\t\t\t? sizes[sizes.length - 1]\n\t\t\t: sizes[sizeIndex];\n\t}\n\n\t// column helpers\n\n\tfunction setColumns() {\n\t\tcolumnHeights = fillArray(sizeDetail.columns);\n\t}\n\n\t// node helpers\n\n\tfunction setNodes() {\n\t\tnodes = toArray(persist ? selectors.new : selectors.all);\n\t}\n\n\tfunction setNodesDimensions() {\n\t\tif(nodes.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tnodesWidth   = nodes[0].clientWidth;\n\t\tnodesHeights = nodes.map(element => element.clientHeight);\n\t}\n\n\tfunction setNodesStyles() {\n\t\tnodes.forEach((element, index) => {\n\t\t\tconst target = columnHeights.indexOf(Math.min.apply(Math, columnHeights));\n\n\t\t\telement.style.position  = 'absolute';\n\t\t\telement.style.top       = `${ columnHeights[target] }px`;\n\t\t\telement.style.left      = `${ (target * nodesWidth) + (target * sizeDetail.gutter) }px`;\n\n\t\t\telement.setAttribute(packed, '');\n\n\t\t\tcolumnHeights[target] += nodesHeights[index] + sizeDetail.gutter;\n\t\t});\n\t}\n\n\t// container helpers\n\n\tfunction setContainerStyles() {\n\t\tcontainer.style.position = 'relative';\n\t\tcontainer.style.width    = `${ sizeDetail.columns * nodesWidth + (sizeDetail.columns - 1) * sizeDetail.gutter }px`;\n\t\tcontainer.style.height   = `${ Math.max.apply(Math, columnHeights) - sizeDetail.gutter }px`;\n\t}\n\n\t// resize helpers\n\n\tfunction resizeFrame() {\n\t\tif(!ticking) {\n\t\t\trequestAnimationFrame(resizeHandler);\n\t\t\tticking = true;\n\t\t}\n\t}\n\n\tfunction resizeHandler() {\n\t\tif(sizeIndex !== getSizeIndex()) {\n\t\t\tpack();\n\t\t\tinstance.emit('resize', sizeDetail);\n\t\t}\n\n\t\tticking = false;\n\t}\n\n\t// API\n\n\tfunction pack() {\n\t\tpersist = false;\n\t\trunSeries(setup.concat(run));\n\n\t\treturn instance.emit('pack');\n\t}\n\n\tfunction update() {\n\t\tpersist = true;\n\t\trunSeries(run);\n\n\t\treturn instance.emit('update');\n\t}\n\n\tfunction resize(flag = true) {\n\t\tconst action = flag\n\t\t\t? 'addEventListener'\n\t\t\t: 'removeEventListener';\n\n\t\twindow[action]('resize', resizeFrame);\n\n\t\treturn instance;\n\t}\n};"]}